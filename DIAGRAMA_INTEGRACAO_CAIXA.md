# ğŸ”„ Diagrama de IntegraÃ§Ã£o do MÃ³dulo CAIXA

## Arquitetura Completa

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       GESTFY SYSTEM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND CLIENTE       â”‚        â”‚   FRONTEND ADMIN         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ catalogo.html          â”‚        â”‚ â€¢ produtos.html          â”‚
â”‚ â€¢ carrinho.html          â”‚        â”‚ â€¢ pedidos.html           â”‚
â”‚ â€¢ pedido.html            â”‚        â”‚ â€¢ estoque.html           â”‚
â”‚ â€¢ acompanhamento.html    â”‚        â”‚ â€¢ relatorios.html        â”‚
â”‚ â€¢ pedidos.html           â”‚        â”‚ â€¢ caixa.html âœ¨NEW       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                    â”‚
         â”‚ fetch()                            â”‚ fetch()
         â”‚ POST /api/pedidos                 â”‚ PUT /api/pedidos/{id}/status
         â†“                                    â†“
    
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SPRING BOOT CONTROLLERS (Port 8080)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ClienteControllerâ”‚  â”‚ ProdutoControllerâ”‚  â”‚ PedidoController
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ GET /api/clientesâ”‚  â”‚ GET /api/produtosâ”‚  â”‚ POST /api/pedidos
â”‚  â”‚ POST /api/clientesâ”‚ â”‚ POST /api/produtosâ”‚ â”‚ GET /api/pedidos
â”‚  â”‚ PUT/DELETE       â”‚  â”‚ PUT/DELETE       â”‚  â”‚ PUT /api/pedidos/{id}/status
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                         â”‚
â”‚                                    ğŸ”¥ NOVO: registrar No Caixa
â”‚                                    quando status = FINALIZADO
â”‚                                         â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ EstoqueControllerâ”‚    â”‚    â”‚ CaixaController âœ¨NEW â”œâ”€â”€â”€â”€â”€â”€â”
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ GET /api/estoque â”‚    â”‚    â”‚ POST /api/caixa       â”‚      â”‚
â”‚  â”‚ POST /api/estoqueâ”‚    â”‚    â”‚ GET /api/caixa        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚ GET /api/caixa/dia    â”‚      â”‚
â”‚                          â”‚    â”‚ GET /api/caixa/{id}   â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚ PUT /api/caixa/{id}   â”‚      â”‚
â”‚  â”‚RelatorioController    â”‚    â”‚ DELETE /api/caixa/{id}â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚    â”‚ GET /relatorio/       â”‚      â”‚
â”‚  â”‚ GET /api/relatorios   â”‚    â”‚     fechamento        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                       â”‚
         â”‚ JPA                 â”‚ JPA                   â”‚ JPA
         â†“                     â†“                       â†“
         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         HIBERNATE + JPA REPOSITORIES (PostgreSQL)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ClienteRepo  â”‚  â”‚ ProdutoRepo  â”‚  â”‚ PedidoRepo          â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ findAll()    â”‚  â”‚ findAll()    â”‚  â”‚ findAll()           â”‚ â”‚
â”‚  â”‚ findById()   â”‚  â”‚ findById()   â”‚  â”‚ findById()          â”‚ â”‚
â”‚  â”‚ save()       â”‚  â”‚ save()       â”‚  â”‚ save()              â”‚ â”‚
â”‚  â”‚ delete()     â”‚  â”‚ delete()     â”‚  â”‚ delete()            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ EstoqueRepo  â”‚  â”‚ CaixaRepo âœ¨  â”‚  â”‚ PedidoItemRepo      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ findAll()    â”‚  â”‚ findAll()    â”‚  â”‚ findAll()           â”‚ â”‚
â”‚  â”‚ findById()   â”‚  â”‚ findByData() â”‚  â”‚ findById()          â”‚ â”‚
â”‚  â”‚ save()       â”‚  â”‚ findByData   â”‚  â”‚ save()              â”‚ â”‚
â”‚  â”‚ delete()     â”‚  â”‚  Between()   â”‚  â”‚ delete()            â”‚ â”‚
â”‚  â”‚ custom...    â”‚  â”‚ save()       â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚              â”‚  â”‚ delete()     â”‚  â”‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ SQL
         â†“
         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              POSTGRESQL DATABASE (localhost:5432)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ cliente    â”‚  â”‚ produto    â”‚  â”‚ pedido     â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚ id (PK)    â”‚  â”‚ id (PK)    â”‚  â”‚ id (PK)    â”‚              â”‚
â”‚  â”‚ nome       â”‚  â”‚ nome       â”‚  â”‚ cliente_id â”‚â”€â”€â”           â”‚
â”‚  â”‚ telefone   â”‚  â”‚ descricao  â”‚  â”‚ status     â”‚  â”‚           â”‚
â”‚  â”‚ email      â”‚  â”‚ preco      â”‚  â”‚ total      â”‚  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ urlFoto    â”‚  â”‚ data       â”‚  â”‚           â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚                                         â”‚         â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”€â”˜      â”‚           â”‚
â”‚  â”‚ pedido_item    â”‚  â”‚ estoque         â”‚         â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚
â”‚  â”‚ id (PK)        â”‚  â”‚ id (PK)         â”‚         â”‚           â”‚
â”‚  â”‚ pedido_id (FK) â”‚  â”‚ produtoId (FK)  â”‚         â”‚           â”‚
â”‚  â”‚ produto_id(FK) â”‚  â”‚ tipoMovimento   â”‚         â”‚           â”‚
â”‚  â”‚ quantidade     â”‚  â”‚ dataMovimento   â”‚         â”‚           â”‚
â”‚  â”‚ precoUnitario  â”‚  â”‚ quantidade      â”‚         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚           â”‚
â”‚                                                   â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”       â”‚
â”‚  â”‚ caixa âœ¨ NEW                                        â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ id (PK)                                             â”‚       â”‚
â”‚  â”‚ saldo (total do pedido ou movimento financeiro)    â”‚       â”‚
â”‚  â”‚ descricao (ex: "Venda #123 - Cliente: JoÃ£o")       â”‚       â”‚
â”‚  â”‚ data (LocalDate - dia da transaÃ§Ã£o)                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ usuario      â”‚  â”‚ relatorio    â”‚                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚  â”‚ id (PK)      â”‚  â”‚ [Views/Query]â”‚                          â”‚
â”‚  â”‚ ...          â”‚  â”‚ (nÃ£o existe  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  como table) â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ Fluxo de Auto-Registro no Caixa

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENTE FINALIZA UMA COMPRA NA WEB                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Submete form em pedido.html
                              â”‚ fetch('POST /api/pedidos')
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND: PedidoController.criarPedido()                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Valida cliente                                               â”‚
â”‚ 2. Cria Pedido com status = "RECEBIDO"                         â”‚
â”‚ 3. Cria PedidoItems (cada produto no carrinho)                 â”‚
â”‚ 4. Calcula total                                                â”‚
â”‚ 5. Registra movimentos de SAIDA no Estoque                     â”‚
â”‚ 6. Salva no banco (Pedido table)                               â”‚
â”‚ 7. Retorna PedidoDTO para cliente                              â”‚
â”‚ âŒ NÃƒO registra em Caixa (ainda nÃ£o foi finalizado)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Admin vÃª pedido em admin/pedidos.html
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ADMIN ATUALIZA STATUS DO PEDIDO                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1Âº: RECEBIDO â†’ EM_PREPARO (prepara pedido)                     â”‚
â”‚ 2Âº: EM_PREPARO â†’ PRONTO_RETIRADA (pronto para ir)              â”‚
â”‚ 3Âº: PRONTO_RETIRADA â†’ SAIU_ENTREGA (entregando) OU              â”‚
â”‚     EM_PREPARO â†’ SAIU_ENTREGA (direto, se para delivery)       â”‚
â”‚ FINAL: PRONTO_RETIRADA/SAIU_ENTREGA â†’ FINALIZADO               â”‚
â”‚        (pedido completou! ğŸ‰)                                    â”‚
â”‚                                                                  â”‚
â”‚ Cada atualizaÃ§Ã£o faz: PUT /api/pedidos/{id}/status?status=...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  PedidoController.atualizarStatus()
                              â”‚
                              â”‚ Verifica se status = "FINALIZADO"
                              â†“
                        ğŸ”¥ SE SIM:
                              â”‚
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOVO: PedidoController.registrarVendaNoCaixa()                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Pega o Pedido com status = "FINALIZADO"                     â”‚
â”‚ 2. Extrai: total = pedido.getTotal()                           â”‚
â”‚ 3. Cria novo objeto Caixa:                                      â”‚
â”‚    - saldo = total                                              â”‚
â”‚    - descricao = "Venda #" + pedido.getId() + " - Cliente: " +  â”‚
â”‚                  pedido.getCliente().getNome()                  â”‚
â”‚    - data = LocalDate.now()                                     â”‚
â”‚ 4. Chama caixaRepository.save(caixa)                           â”‚
â”‚ 5. Pronto! âœ…                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ INSERT INTO caixa (saldo, descricao, data)
                              â”‚ VALUES (125.50, 'Venda #45 - Cliente: JoÃ£o Silva', '2025-01-15')
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BANCO DE DADOS: Novo registro em Caixa table                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: 123 (auto-gerado)                                           â”‚
â”‚ saldo: 125.50                                                   â”‚
â”‚ descricao: "Venda #45 - Cliente: JoÃ£o Silva"                   â”‚
â”‚ data: 2025-01-15                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Admin abre admin/caixa.html
                              â”‚ fetch('GET /api/caixa/dia')
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND: CaixaController retorna dados do dia                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                                â”‚
â”‚   "data": "2025-01-15",                                         â”‚
â”‚   "totalDia": 210.40,                                           â”‚
â”‚   "quantidadeRegistros": 2,                                     â”‚
â”‚   "registros": [                                                â”‚
â”‚     {"id": 123, "saldo": 125.50, ...},                         â”‚
â”‚     {"id": 124, "saldo": 89.90, ...}                           â”‚
â”‚   ]                                                              â”‚
â”‚ }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ caixa.js processa resposta
                              â”‚ document.getElementById("total-arrecadado")
                              â”‚ .textContent = "R$ 210,40"
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INTERFACE: Admin vÃª caixa atualizado em tempo real ğŸ“Š            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’° Total Arrecadado: R$ 210,40                                  â”‚
â”‚ ğŸ’° Entradas: R$ 215,40                                          â”‚
â”‚ ğŸ’¸ SaÃ­das: R$ 5,00                                              â”‚
â”‚ ğŸ“ Quantidade: 2 transaÃ§Ãµes                                     â”‚
â”‚                                                                  â”‚
â”‚ Tabela:                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚ ID â”‚ DescriÃ§Ã£o                        â”‚ Valor   â”‚             â”‚
â”‚ â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚ â”‚123 â”‚ Venda #45 - Cliente: JoÃ£o Silva  â”‚ +125,50 â”‚             â”‚
â”‚ â”‚124 â”‚ Venda #46 - Cliente: Maria Santosâ”‚  +89,90 â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                  â”‚
â”‚ [ğŸ”’ Fechar Caixa] [ğŸ“Š Ver RelatÃ³rio] [ğŸ”„ Recarregar]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Modelo de Dados da Caixa

```sql
-- Estrutura do CAIXA
CREATE TABLE caixa (
    id SERIAL PRIMARY KEY,
    saldo DOUBLE PRECISION NOT NULL,      -- Valor da transaÃ§Ã£o
    descricao VARCHAR(255) NOT NULL,      -- "Venda #123 - Cliente: JoÃ£o"
    data DATE NOT NULL,                   -- Data do registro
    created_at TIMESTAMP DEFAULT NOW(),   -- Criado em
    updated_at TIMESTAMP DEFAULT NOW()    -- Atualizado em
);

-- Ãndices para performance
CREATE INDEX idx_caixa_data ON caixa(data);
CREATE INDEX idx_caixa_data_range ON caixa(data DESC);

-- Exemplos de dados apÃ³s algumas vendas finalizadas
INSERT INTO caixa (saldo, descricao, data) VALUES
  (125.50, 'Venda #45 - Cliente: JoÃ£o Silva', '2025-01-15'),
  (89.90, 'Venda #46 - Cliente: Maria Santos', '2025-01-15'),
  (45.00, 'Venda #47 - Cliente: Pedro Oliveira', '2025-01-15'),
  (-5.00, 'Devolvido - Cliente: JoÃ£o Silva', '2025-01-15'),
  (60.00, 'Venda #48 - Cliente: Ana Costa', '2025-01-16');

-- Consultas Ãºteis
SELECT SUM(saldo) as total_do_dia 
FROM caixa 
WHERE data = CURRENT_DATE;

SELECT * FROM caixa 
WHERE data BETWEEN '2025-01-15' AND '2025-01-20' 
ORDER BY data DESC, id DESC;
```

---

## ğŸ”— IntegraÃ§Ãµes em AÃ§Ã£o

### 1ï¸âƒ£ Quando Pedido Ã© Criado
```
Cliente â†’ POST /api/pedidos
  â”œâ”€ âœ… Cria Pedido (status="RECEBIDO")
  â”œâ”€ âœ… Cria PedidoItems
  â”œâ”€ âœ… Registra SAIDA no Estoque
  â””â”€ âŒ NÃƒO registra Caixa (nÃ£o finalizado)
```

### 2ï¸âƒ£ Quando Pedido Ã© Finalizado
```
Admin â†’ PUT /api/pedidos/{id}/status?status=FINALIZADO
  â”œâ”€ âœ… Muda status
  â”œâ”€ âœ… Valida transiÃ§Ã£o
  â””â”€ ğŸ”¥ AUTO: Registra entrada no Caixa
```

### 3ï¸âƒ£ Quando Admin Consulta Caixa
```
Admin â†’ GET /api/caixa/dia
  â”œâ”€ âœ… Retorna total do dia
  â”œâ”€ âœ… Lista todas as transaÃ§Ãµes
  â”œâ”€ âœ… Calcula entradas e saÃ­das
  â””â”€ âœ… Formata em JSON
```

---

## ğŸ“± Tecnologias Envolvidas

| Camada | Tecnologia | FunÃ§Ã£o |
|--------|-----------|--------|
| **Frontend** | HTML5 | Estrutura da pÃ¡gina |
| | CSS3 | Estilo e layout responsivo |
| | JavaScript ES6+ | LÃ³gica de fetch e DOM |
| **Backend** | Spring Boot 3.2.5 | Framework principal |
| | Java 17 | Linguagem |
| | JPA/Hibernate | ORM para banco de dados |
| **Database** | PostgreSQL | PersistÃªncia de dados |

---

## ğŸ¯ Componentes Principais

```
â”Œâ”€ CaixaController (Backend)
â”‚  â”œâ”€ POST /api/caixa
â”‚  â”œâ”€ GET /api/caixa
â”‚  â”œâ”€ GET /api/caixa/dia
â”‚  â”œâ”€ GET /api/caixa/{id}
â”‚  â”œâ”€ PUT /api/caixa/{id}
â”‚  â”œâ”€ DELETE /api/caixa/{id}
â”‚  â””â”€ GET /api/caixa/relatorio/fechamento
â”‚
â”œâ”€ CaixaDTO (Model)
â”‚  â”œâ”€ id: Long
â”‚  â”œâ”€ saldo: Double
â”‚  â”œâ”€ descricao: String
â”‚  â””â”€ data: LocalDate
â”‚
â”œâ”€ CaixaRequest (DTO)
â”‚  â”œâ”€ saldo: Double (@NotNull)
â”‚  â”œâ”€ descricao: String (@NotBlank)
â”‚  â””â”€ data: LocalDate (@NotNull)
â”‚
â”œâ”€ CaixaRepository (Data Access)
â”‚  â”œâ”€ findAll()
â”‚  â”œâ”€ findByData(LocalDate)
â”‚  â””â”€ findByDataBetween(LocalDate, LocalDate)
â”‚
â”œâ”€ caixa.html (Frontend)
â”‚  â”œâ”€ Header (tÃ­tulo + data)
â”‚  â”œâ”€ Total arrecadado (destaque)
â”‚  â”œâ”€ EstatÃ­sticas (cards)
â”‚  â”œâ”€ AÃ§Ãµes (botÃµes)
â”‚  â”œâ”€ Filtro por data
â”‚  â”œâ”€ Tabela de vendas
â”‚  â””â”€ Modal de fechamento
â”‚
â””â”€ caixa.js (LÃ³gica Frontend)
   â”œâ”€ carregarCaixaDoDia()
   â”œâ”€ filtrarPorData()
   â”œâ”€ abrirModalFechamento()
   â”œâ”€ visualizarRelatorio()
   â”œâ”€ formatarMoeda()
   â””â”€ formatarDataBR()
```

---

**Status:** âœ… PRONTO PARA PRODUÃ‡ÃƒO

Todos os componentes estÃ£o integrados e funcionando! ğŸš€

